<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Qur'anic Dictionary</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Droid Arabic Naskh font import -->
    <link href="https://fonts.googleapis.com/css2?family=Droid+Arabic+Naskh:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base styles for all screen sizes */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        
        body {
            background: #F5F5F5; /* New White background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            background-color: #fff;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            border: 4px solid #364F6B; /* New Dark Blue/Gray border */
            box-shadow: 0 10px 30px rgba(54, 79, 107, 0.15); /* New subtle shadow based on dark blue */
        }
        
        .header {
            background: linear-gradient(to right, #364F6B, #3FC1C9); /* New Dark Blue to Cyan gradient */
            padding: 25px;
            text-align: center;
            position: relative;
        }
        
        .logo-container {
            width: 60px;
            height: 60px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            backdrop-filter: blur(5px);
        }
        
        .logo-container img {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }
        
        .app-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            margin-bottom: 5px;
            letter-spacing: 0.5px;
        }
        
        .app-subtitle {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.85);
            font-weight: 500;
        }

        .app-description {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 10px;
            line-height: 1.4;
        }
        
        /* Video Button */
        .video-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .video-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        
        .video-btn i {
            color: white;
            font-size: 1.2rem;
        }

        /* Info Button */
        .info-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .info-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        
        .info-btn i {
            color: white;
            font-size: 1.2rem;
        }
        
        /* Arabic Letter Selectors */
        .letter-selectors {
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 20px;
            background: #F5F5F5; /* New White background */
        }
        
        .letter-selector {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 120px;
        }
        
        .letter-label {
            font-size: 1.2rem;
            color: #364F6B; /* New Dark Blue/Gray text */
            margin-bottom: 15px;
            font-weight: 600;
            font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif;
        }
        
        .letter-wheel {
            position: relative;
            height: 180px;
            width: 100px;
            overflow: hidden;
            border-radius: 15px;
            background: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 2px solid #3FC1C9; /* New Cyan/Teal border */
        }
        
        .letter-option {
            position: absolute;
            width: 100%;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif;
            color: #364F6B; /* New Dark Blue/Gray text */
            transition: all 0.1s ease-out;
            opacity: 0.3;
            transform: scale(0.8);
            user-select: none;
        }
        
        .letter-option.prev {
            top: 0;
            z-index: 1;
        }
        
        .letter-option.selected {
            top: 50%;
            transform: translateY(-50%) scale(1);
            opacity: 1;
            z-index: 3;
            font-weight: bold;
            font-size: 3rem;
            color: #364F6B; /* New Dark Blue/Gray text */
        }
        
        .letter-option.next {
            bottom: 0;
            z-index: 1;
        }
        
        /* Root Word Display */
        .root-display {
            padding: 15px;
            background: #F5F5F5; /* New White background */
            text-align: center;
            border: 2px solid #3FC1C9; /* New Cyan/Teal border */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin: 0 20px;
            border-radius: 10px;
        }
        
        .root-word {
            font-size: 3.5rem;
            font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif;
            color: #364F6B; /* New Dark Blue/Gray text */
            font-weight: bold;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Search and Dictionary Buttons */
        .controls {
            display: flex;
            justify-content: space-around;
            gap: 10px;
            padding: 15px 20px 10px;
            background: #F5F5F5; /* New White background */
        }
        
        #searchBtn, #dictionaryBtn {
            flex: 1;
            padding: 16px 20px;
            background: #364F6B; /* Dark Blue/Gray */
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(54, 79, 107, 0.3); /* Shadow based on Dark Blue/Gray */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        #searchBtn:hover, #dictionaryBtn:hover {
            background: #3FC1C9; /* Cyan/Teal on hover */
            transform: translateY(-2px);
        }

        /* Verb Forms Display - 2x2 Grid */
        .verb-forms {
            display: flex;
            flex-wrap: wrap;
            padding: 15px;
            background: #F5F5F5; /* New White background */
            gap: 12px;
            justify-content: center;
            margin-top: -5px;
        }
        
        .verb-form {
            flex: 0 0 calc(50% - 6px);
            min-width: 180px;
            background: white;
            border-radius: 15px;
            padding: 18px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.03);
            border: 2px solid #3FC1C9; /* New Cyan/Teal border */
        }
        
        .verb-title {
            font-size: 1rem;
            color: #364F6B; /* New Dark Blue/Gray text */
            margin-bottom: 12px;
            font-weight: 600;
        }
        
        .verb-word {
            font-size: 2.2rem;
            font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif;
            color: #364F6B; /* New Dark Blue/Gray text */
            font-weight: bold;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Footer Links */
        .footer-links {
            padding: 15px 20px;
            background: #F5F5F5; /* New White background */
            text-align: center;
            border-top: 1px solid #3FC1C9; /* New Cyan/Teal border */
            display: flex;
            justify-content: center;
            gap: 40px;
        }

        .footer-links a {
            color: #364F6B; /* New Dark Blue/Gray link color */
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #3FC1C9; /* New Cyan/Teal on hover */
        }

        /* Modals (General) */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow: auto;
            position: relative;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }
        
        .modal-header {
            background: linear-gradient(to right, #364F6B, #3FC1C9); /* New Dark Blue to Cyan gradient */
            padding: 20px;
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .modal-body {
            padding: 30px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.8rem;
            color: white;
            cursor: pointer;
            background: none;
            border: none;
        }
        
        /* Video Modal Specific Styles */
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            background: #000;
        }
        
        .video-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
            background: #222;
        }
        
        .video-placeholder i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #3FC1C9; /* New Cyan/Teal icon */
        }
        
        .video-placeholder p {
            font-size: 1.2rem;
            text-align: center;
            max-width: 80%;
        }

        /* Info Modal Specific Styles */
        .info-modal-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .info-modal-text {
            text-align: center;
            font-size: 0.95rem;
            line-height: 1.5;
            color: #555;
        }

        .info-modal-text strong {
            color: #333;
        }

        .info-modal-text a {
            color: #364F6B; /* New Dark Blue/Gray link color */
            text-decoration: none;
            font-weight: 600;
        }

        .info-modal-text a:hover {
            text-decoration: underline;
        }
        
        /* Mobile Responsiveness: Styles applied when screen width is 480px or less */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            /* Header adjustments */
            .header {
                padding: 15px;
            }
            .app-title {
                font-size: 1.5rem;
            }
            .app-subtitle {
                font-size: 0.85rem;
            }
            .app-description {
                font-size: 0.8rem;
            }
            
            /* Header button adjustments */
            .video-btn, .info-btn {
                width: 35px;
                height: 35px;
                top: 10px;
                right: 10px;
            }
            .info-btn {
                left: 10px;
            }

            .letter-selectors {
                gap: 8px;
                padding: 15px 10px;
            }
            
            .letter-selector {
                width: 100px;
            }
            
            .letter-wheel {
                height: 150px;
                width: 90px;
            }
            
            .letter-option {
                height: 50px;
                font-size: 2rem;
            }
            
            .letter-option.selected {
                font-size: 2.5rem;
            }
            
            .letter-label {
                font-size: 1.1rem;
            }
            
            /* Root word display adjustments */
            .root-display {
                padding: 10px;
                margin: 0 10px;
            }
            .root-word {
                font-size: 2.2rem;
                height: 50px;
            }
            
            /* Button adjustments */
            .controls {
                padding: 10px;
                gap: 8px;
            }
            #searchBtn, #dictionaryBtn {
                padding: 12px 15px;
                font-size: 1rem;
            }

            /* Verb Forms Display (Results) adjustments for 2x2 grid */
            .verb-forms {
                gap: 8px;
                padding: 10px;
            }
            
            .verb-form {
                flex: 0 0 calc(50% - 4px);
                min-width: unset;
                padding: 10px;
            }
            
            .verb-title {
                display: none;
            }
            .verb-word {
                font-size: 1.5rem;
                height: 40px;
            }

            .modal-body {
                padding: 20px;
                font-size: 1rem;
            }

            .modal-header {
                font-size: 1.3rem;
                padding: 15px;
            }

            .close-modal {
                font-size: 1.5rem;
                top: 10px;
                right: 15px;
            }

            .footer-links {
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="video-btn" id="videoBtn">
                <i class="fas fa-play"></i>
            </button>
            <button class="info-btn" id="infoBtn">
                <i class="fas fa-question"></i>
            </button>
            <div class="logo-container">
                <img src="https://khuddam.co.nz/images/old-logo-border.png" alt="Logo">
            </div>
            <h1 class="app-title">Digital Qur'anic Dictionary</h1>
            <p class="app-subtitle">By Late Lutfur Rahman Khan Sb</p>
            <p class="app-description">This digital dictionary is free of cost for the purpose of sadaqah-e-jariyah (continuous charity).</p>
        </div>
        
        <!-- Arabic Letter Selectors - ف كلمة on the right -->
        <div class="letter-selectors">
            <div class="letter-selector">
                <div class="letter-label">ل كلمة</div>
                <div class="letter-wheel" id="letter3">
                    <!-- Letters will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="letter-selector">
                <div class="letter-label">ع كلمة</div>
                <div class="letter-wheel" id="letter2">
                    <!-- Letters will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="letter-selector">
                <div class="letter-label">ف كلمة</div>
                <div class="letter-wheel" id="letter1">
                    <!-- Letters will be populated by JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Root Word Display -->
        <div class="root-display">
            <div class="root-word" id="rootWord">فعل</div>
        </div>
        
        <!-- Search and Dictionary Buttons -->
        <div class="controls">
            <button id="searchBtn">
                <i class="fas fa-search"></i>
                Search
            </button>
            <button id="dictionaryBtn">
                <i class="fas fa-book"></i>
                Dictionary
            </button>
        </div>
        
        <!-- Verb Forms Display -->
        <div class="verb-forms">
            <div class="verb-form">
                <div class="verb-title">Past</div>
                <div class="verb-word" id="pastTense">فَعَلَ</div>
            </div>
            
            <div class="verb-form">
                <div class="verb-title">Present & Future</div>
                <div class="verb-word" id="presentTense">يَفْعَلُ</div>
            </div>
            
            <div class="verb-form">
                <div class="verb-title">Imperative</div>
                <div class="verb-word" id="imperative">اِفْعَلْ</div>
            </div>
            
            <div class="verb-form">
                <div class="verb-title">Verbal Noun (Masdar)</div>
                <div class="verb-word" id="masdar">فَعْلًا</div>
            </div>
        </div>
        
        <!-- Footer Links -->
        <div class="footer-links">
            <a href="#" id="fourHuroofLink">Words with 4 Huroof</a>
            <a href="#" id="notesLink">Important Notes</a>
        </div>
    </div>
    
    <!-- Dictionary Popup Modal -->
    <div class="modal" id="dictionaryModal">
        <div class="modal-content">
            <div class="modal-header">
                Qur'anic Dictionary Entry
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Video Popup Modal -->
    <div class="modal" id="videoModal">
        <div class="modal-content">
            <div class="modal-header">
                Educational Video
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="video-container">
                    <div class="video-placeholder">
                        <i class="fas fa-video"></i>
                        <p>Video player will be embedded here</p>
                    </div>
                </div>
                <div style="padding: 20px; text-align: center;">
                    <h3>How to Use the Qur'anic Dictionary</h3>
                    <p>This video will explain how to effectively use the digital Qur'anic dictionary to enhance your understanding of Arabic root words.</p>
                    <p>You'll learn about the structure of Arabic verbs and how to analyze word formations.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Info Popup Modal -->
    <div class="modal" id="infoModal">
        <div class="modal-content">
            <div class="modal-header">
                About This Dictionary
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <img src="https://raw.githubusercontent.com/minhajsiddiqui20/arabic-dictionary/refs/heads/main/QuranicDictionary.jpg" alt="Quranic Dictionary Cover" class="info-modal-image">
                <p class="info-modal-text">
                    <strong>KHUDDAM-UL-QURAN NZ © 2021</strong><br>
                    This dictionary was written by Lutfur Rahman Sb (late) and published by Al Balagh Foundation, Lahore, Pakistan. For the sake of Allah (SWT), Khuddam-ul-Quran NZ has endeavoured to digitise it for the benefit of all Arabic grammar students, enabling a quick search for the meanings of Qur’anic words. Alhamdulillah. May Allah (SWT) accept our efforts. Ameen.<br>
                    For feedback <a href="mailto:khudaamulqurannz@gmail.com">click here</a><br>
                    khudaamulqurannz@gmail.com
                </p>
            </div>
        </div>
    </div>

    <!-- 4 Huroof Words Popup Modal -->
    <div class="modal" id="fourHuroofModal">
        <div class="modal-content">
            <div class="modal-header">
                Words with 4 Huroof
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>This is a placeholder page for "Words with 4 Huroof".</p>
                <p>You can add detailed content here later regarding words with four root letters.</p>
            </div>
        </div>
    </div>

    <!-- Important Notes Popup Modal -->
    <div class="modal" id="notesModal">
        <div class="modal-content">
            <div class="modal-header">
                Important Notes
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>This is a placeholder page for "Important Notes".</p>
                <p>You can add important information, grammar rules, or usage tips here later.</p>
            </div>
        </div>
    </div>

    <script>
        // Arabic letters array
        const arabicLetters = [
            'ا', 'ب', 'ت', 'ث', 'ج', 'ح', 'خ', 'د', 'ذ', 'ر', 'ز', 'س',
            'ش', 'ص', 'ض', 'ط', 'ظ', 'ع', 'غ', 'ف', 'ق', 'ك', 'ل', 'م', 'ن', 'ه', 'و', 'ي'
        ];
        
        // Selected letters for each position
        const selectedLetters = [19, 17, 22]; // Indexes for ف, ع, ل initially (فعل)
        
        // Verb database - sample data
        const verbDatabase = {
            "فعل": {
                past: "فَعَلَ",
                present: "يَفْعَلُ",
                imperative: "اِفْعَلْ",
                masdar: "فَعْلًا"
            },
            "كتب": {
                past: "كَتَبَ",
                present: "يَكْتُبُ",
                imperative: "اُكْتُبْ",
                masdar: "كِتَابَةً"
            },
            "قرأ": {
                past: "قَرَأَ",
                present: "يَقْرَأُ",
                imperative: "اِقْرَأْ",
                masdar: "قِرَاءَةً"
            },
            "سمع": { // Added 'سمع' for verb forms
                past: "سَمِعَ",
                present: "يَسْمَعُ",
                imperative: "اِسْمَعْ",
                masdar: "سَمْعًا"
            },
            "علم": {
                past: "عَلِمَ",
                present: "يَعْلَمُ",
                imperative: "اِعْلَمْ",
                masdar: "عِلْمًا"
            },
            "نصر": {
                past: "نَصَرَ",
                present: "يَنْصُرُ",
                imperative: "اُنْصُرْ",
                masdar: "نَصْرًا"
            },
            "دخل": {
                past: "دَخَلَ",
                present: "يَدْخُلُ",
                imperative: "اُدْخُلْ",
                masdar: "دُخُولًا"
            },
            "خرج": {
                past: "خَرَجَ",
                present: "يَخْرُجُ",
                imperative: "اُخْرُجْ",
                masdar: "خُرُوجًا"
            },
            "عبد": {
                past: "عَبَدَ",
                present: "يَعْبُدُ",
                imperative: "اُعْبُدْ",
                masdar: "عِبَادَةً"
            },
            "صبر": {
                past: "صَبَرَ",
                present: "يَصْبِرُ",
                imperative: "اِصْبِرْ",
                masdar: "صَبْرًا"
            }
        };
        
        // Custom dictionary content for specific root words
        const dictionaryContent = {
            // Removed "سمع" from here as it will now load from its own HTML file
            "فعل": `
                <h2 style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; text-align: right; margin-bottom: 20px; color: #364F6B;">ف ع ل</h2>
                <p style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; font-size: 1.2rem; text-align: right; margin-bottom: 15px;">
                    <strong>فَعَلَ</strong> – To do, to act, to make. This is a fundamental root in Arabic, often used as a placeholder for any verb.
                </p>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">فَعَلَ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Past Tense</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">يَفْعَلُ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Present & Future Tense</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">اِفْعَلْ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Imperative</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">فَعْلًا</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Verbal Noun (Masdar)</span>
                    </div>
                </div>
                
                <h3 style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; text-align: right; margin-top: 30px; margin-bottom: 15px; color: #364F6B;">Usage on Different Weights (أوزان):</h3>
                <p style="text-align: right; margin-bottom: 15px;">
                    The root **ف-ع-ل** is highly versatile and forms the basis for understanding verb patterns (أوزان) in Arabic. Its meaning changes significantly based on the "weight" or form it takes.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form I (فَعَلَ):** Basic meaning, e.g., **فَعَلَ** (fa'ala) - he did/acted.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form II (فَعَّلَ):** Intensification or causation, e.g., **فَعَّلَ** (fa''ala) - he caused to do, he made active.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form III (فَاعَلَ):** Participation or attempt, e.g., **فَاعَلَ** (fā'ala) - he participated in doing, he tried to do.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form IV (أَفْعَلَ):** Causation or beginning, e.g., **أَفْعَلَ** (af'ala) - he caused to do, he initiated.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form V (تَفَعَّلَ):** Reflexive of Form II, e.g., **تَفَعَّلَ** (tafa''ala) - he did it to himself, he undertook.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form VI (تَفَاعَلَ):** Reciprocal or feigned action, e.g., **تَفَاعَلَ** (tafā'ala) - they did it to each other, he pretended to do.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form VII (اِنْفَعَلَ):** Reflexive of Form I (often passive sense), e.g., **اِنْفَعَلَ** (infa'ala) - it was done, it became affected.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form VIII (اِفْتَعَلَ):** Taking or acquiring, often with an intensive or reflexive meaning, e.g., **اِفْتَعَلَ** (ifta'ala) - he acquired, he undertook.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form IX (اِفْعَلَّ):** Colors or defects, e.g., **اِفْعَلَّ** (if'alla) - it became (color), it became (defect).
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form X (اِسْتَفْعَلَ):** Seeking or requesting, e.g., **اِسْتَفْعَلَ** (istaf'ala) - he sought to do, he requested.
                </p>
            `,
            "حمد": `
                <h2 style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; text-align: right; margin-bottom: 20px; color: #364F6B;">ح م د</h2>
                <p style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; font-size: 1.2rem; text-align: right; margin-bottom: 15px;">
                    <strong>حَمِدَ</strong> – To praise, to laud, to commend. This root is central to the concept of praising Allah (SWT).
                </p>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">حَمِدَ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Past Tense</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">يَحْمَدُ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Present & Future Tense</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">اِحْمَدْ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Imperative</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">حَمْدًا</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Verbal Noun (Masdar)</span>
                    </div>
                </div>
                
                <h3 style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; text-align: right; margin-top: 30px; margin-bottom: 15px; color: #364F6B;">Usage on Different Weights (أوزان):</h3>
                <p style="text-align: right; margin-bottom: 15px;">
                    The root **ح-م-د** primarily conveys the meaning of praise and gratitude.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form I (حَمِدَ):** To praise, to thank. E.g., **الحَمْدُ للهِ** (Alhamdulillah) - All praise is due to Allah.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form II (حَمَّدَ):** To praise excessively or repeatedly. E.g., **تَحْمِيدٌ** (Tahmeed) - uttering praise.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form IV (أَحْمَدَ):** To be praiseworthy, to find something praiseworthy. Also a proper name. E.g., **أَحْمَدُ** (Ahmad) - The most praiseworthy.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form V (تَحَمَّدَ):** To seek praise, to make oneself praiseworthy.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form X (اِسْتَحْمَدَ):** To seek praise or commendation.
                </p>
            `,
            "ذهب": `
                <h2 style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; text-align: right; margin-bottom: 20px; color: #364F6B;">ذ ه ب</h2>
                <p style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; font-size: 1.2rem; text-align: right; margin-bottom: 15px;">
                    <strong>ذَهَبَ</strong> – To go, to depart, to pass away. It can also mean to take away or remove.
                </p>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">ذَهَبَ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Past Tense</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">يَذْهَبُ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Present & Future Tense</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">اِذْهَبْ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Imperative</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">ذَهَابًا</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Verbal Noun (Masdar)</span>
                    </div>
                </div>
                
                <h3 style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; text-align: right; margin-top: 30px; margin-bottom: 15px; color: #364F6B;">Usage on Different Weights (أوزان):</h3>
                <p style="text-align: right; margin-bottom: 15px;">
                    The root **ذ-ه-ب** primarily means 'to go' but can convey 'to take away' or 'to remove' in different forms.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form I (ذَهَبَ):** To go, to depart, to pass away. E.g., **ذَهَبَ إِلَى السُّوقِ** (dhahaba ila as-suq) - He went to the market.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form IV (أَذْهَبَ):** To take away, to remove, to cause to go. E.g., **أَذْهَبَ اللهُ هَمَّهُ** (adhhaba Allahu hammahu) - Allah removed his worry.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form V (تَذَهَّبَ):** To become gold (from ذهب meaning gold).
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form VIII (اِذْتَهَبَ):** To carry off, to take away.
                </p>
            `,
            "قال": `
                <h2 style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; text-align: right; margin-bottom: 20px; color: #364F6B;">ق و ل</h2>
                <p style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; font-size: 1.2rem; text-align: right; margin-bottom: 15px;">
                    <strong>قَالَ</strong> – To say, to speak, to tell. This is a hollow verb (أجوف) due to the middle weak letter.
                </p>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">قَالَ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Past Tense</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">يَقُولُ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Present & Future Tense</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">قُلْ</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Imperative</span>
                    </div>
                    <div style="flex: 1 1 calc(50% - 5px); border: 1px solid #3FC1C9; border-radius: 8px; padding: 10px; text-align: right; background-color: #fff;">
                        <strong style="font-family: 'Droid Arabic Naskh', serif; font-size: 1.8rem; color: #364F6B;">قَوْلًا</strong><br>
                        <span style="font-size: 0.9rem; color: #555;">Verbal Noun (Masdar)</span>
                    </div>
                </div>
                
                <h3 style="font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif; text-align: right; margin-top: 30px; margin-bottom: 15px; color: #364F6B;">Usage on Different Weights (أوزان):</h3>
                <p style="text-align: right; margin-bottom: 15px;">
                    The root **ق-و-ل** is a common hollow verb (أجوف واوي) and its forms are essential for understanding Arabic speech.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form I (قَالَ):** To say, to speak. E.g., **قَالَ اللهُ** (qāla Allahu) - Allah said.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form II (قَوَّلَ):** To make someone say, to attribute a saying to someone.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form III (قَاوَلَ):** To negotiate, to converse with.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form IV (أَقَالَ):** To dismiss, to cancel (a sale).
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form V (تَقَوَّلَ):** To invent a saying, to fabricate.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form VI (تَقَاوَلَ):** To exchange words, to argue.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form VIII (اِقْتَالَ):** To choose a saying, to select words.
                </p>
                <p style="text-align: right; margin-bottom: 15px;">
                    **Form X (اِسْتَقَالَ):** To resign, to ask for dismissal.
                </p>
            `
        };
        
        // Initialize letter selectors
        function initLetterSelectors() {
            for (let i = 1; i <= 3; i++) {
                updateLetterSelector(i);
                setupScrolling(i);
            }
            updateRootWord();
            searchVerb(); // Call searchVerb initially to display default verb forms
        }
        
        // Update letter selector display
        function updateLetterSelector(position) {
            const container = document.getElementById(`letter${position}`);
            container.innerHTML = '';
        
            const currentIndex = selectedLetters[position - 1];
        
            // Previous letter
            const prevIndex = (currentIndex - 1 + arabicLetters.length) % arabicLetters.length;
            const prevLetter = document.createElement('div');
            prevLetter.className = 'letter-option prev';
            prevLetter.textContent = arabicLetters[prevIndex];
            container.appendChild(prevLetter);
        
            // Selected letter
            const selectedLetter = document.createElement('div');
            selectedLetter.className = 'letter-option selected';
            selectedLetter.textContent = arabicLetters[currentIndex];
            container.appendChild(selectedLetter);
        
            // Next letter
            const nextIndex = (currentIndex + 1) % arabicLetters.length;
            const nextLetter = document.createElement('div');
            nextLetter.className = 'letter-option next';
            nextLetter.textContent = arabicLetters[nextIndex];
            container.appendChild(nextLetter);
        }
        
        // Setup scrolling for letter wheels
        function setupScrolling(position) {
            const wheel = document.getElementById(`letter${position}`);
        
            wheel.addEventListener('wheel', (e) => {
                e.preventDefault(); // Prevent page scroll
                const scrollAmount = Math.round(e.deltaY / 20); // Adjust sensitivity here
                if (scrollAmount !== 0) {
                    changeLetter(position, scrollAmount);
                }
            });
            
            // Touch support for mobile
            let touchStartY = 0;
            let isSwiping = false; // Flag to track if a swipe is in progress
        
            wheel.addEventListener('touchstart', (e) => {
                touchStartY = e.touches[0].clientY;
                isSwiping = true; // Set flag when touch starts
            });
        
            wheel.addEventListener('touchmove', (e) => {
                e.preventDefault(); // Prevent page scroll during touchmove
                if (!isSwiping) return; // Only process if a swipe might be happening
                const touchY = e.touches[0].clientY;
                const swipeDistance = touchY - touchStartY;
                const scrollAmount = Math.round(swipeDistance / 20); // Adjust sensitivity here
                
                if (scrollAmount !== 0) {
                    changeLetter(position, -scrollAmount); // Negative because swiping down is positive deltaY, but moves to next letter (positive index)
                    touchStartY = touchY; // Reset start for continuous swipe
                }
            });
        
            wheel.addEventListener('touchend', () => {
                isSwiping = false; // Reset flag when touch ends
            });
        }
        
        // Change letter in selector
        function changeLetter(position, amount) {
            selectedLetters[position - 1] = (selectedLetters[position - 1] + amount + arabicLetters.length * Math.abs(amount)) % arabicLetters.length;
            updateLetterSelector(position);
            updateRootWord();
        }
        
        // Update root word display
        function updateRootWord() {
            const rootWord = arabicLetters[selectedLetters[0]] +
                                arabicLetters[selectedLetters[1]] +
                                arabicLetters[selectedLetters[2]];
            document.getElementById('rootWord').textContent = rootWord;
        }
        
        // Search for verb forms
        function searchVerb() {
            const rootWord = document.getElementById('rootWord').textContent;
            
            if (verbDatabase[rootWord]) {
                document.getElementById('pastTense').textContent = verbDatabase[rootWord].past;
                document.getElementById('presentTense').textContent = verbDatabase[rootWord].present;
                document.getElementById('imperative').textContent = verbDatabase[rootWord].imperative;
                document.getElementById('masdar').textContent = verbDatabase[rootWord].masdar;
            } else {
                // Default values for unknown roots
                document.getElementById('pastTense').textContent = '---';
                document.getElementById('presentTense').textContent = '---';
                document.getElementById('imperative').textContent = '---';
                document.getElementById('masdar').textContent = '---';
            }
        }
        
        // Open dictionary modal
        function openDictionary() {
            const rootWord = document.getElementById('rootWord').textContent;
            const dictionaryModalBody = document.querySelector('#dictionaryModal .modal-body');
        
            // Define the base path for your dictionary pages
            const basePath = 'dictionary_pages/';
            const specificPageUrl = `${basePath}${rootWord}.html`;
            
            fetch(specificPageUrl)
                .then(response => {
                    if (response.ok) {
                        // If the specific page exists, redirect to it
                        window.location.href = specificPageUrl;
                    } else {
                        // If the specific page does NOT exist, use the content from dictionaryContent (if available)
                        // or fall back to the generic placeholder in the modal.
                        if (dictionaryContent[rootWord]) {
                            dictionaryModalBody.innerHTML = dictionaryContent[rootWord];
                        } else {
                            dictionaryModalBody.innerHTML = `
                                <p style="text-align: center; margin-bottom: 20px;">
                                    <strong style="font-size: 1.5rem; color: #364F6B; font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif;">
                                        ${rootWord}
                                    </strong>
                                </p>
                                <p>Detailed content for this root word is not yet available.</p>
                                <p>Please check back later or contribute to expand the dictionary!</p>
                            `;
                        }
                        // Display the modal if no specific page was found
                        document.getElementById('dictionaryModal').style.display = 'flex';
                    }
                })
                .catch(error => {
                    console.error('Error checking dictionary page:', error);
                    // Fallback to modal if fetch fails due to network or other issues
                    dictionaryModalBody.innerHTML = `
                        <p style="text-align: center; margin-bottom: 20px;">
                            <strong style="font-size: 1.5rem; color: #364F6B; font-family: 'Droid Arabic Naskh', 'Noto Sans Arabic', serif;">
                                ${rootWord}
                            </strong>
                        </p>
                        <p>Could not load dictionary content. Please check your internet connection or try again later.</p>
                    `;
                    document.getElementById('dictionaryModal').style.display = 'flex';
                });
        }
        
        // Open video modal
        function openVideo() {
            document.getElementById('videoModal').style.display = 'flex';
        }

        // Open info modal
        function openInfo() {
            document.getElementById('infoModal').style.display = 'flex';
        }

        // Open 4 Huroof modal
        function openFourHuroof() {
            document.getElementById('fourHuroofModal').style.display = 'flex';
        }

        // Open notes modal
        function openNotes() {
            document.getElementById('notesModal').style.display = 'flex';
        }
        
        // Close modals
        function closeModal() {
            document.getElementById('dictionaryModal').style.display = 'none';
            document.getElementById('videoModal').style.display = 'none';
            document.getElementById('infoModal').style.display = 'none';
            document.getElementById('fourHuroofModal').style.display = 'none';
            document.getElementById('notesModal').style.display = 'none';
        }
        
        // Event Listeners
        document.getElementById('searchBtn').addEventListener('click', searchVerb);
        document.getElementById('dictionaryBtn').addEventListener('click', openDictionary);
        document.getElementById('videoBtn').addEventListener('click', openVideo);
        document.getElementById('infoBtn').addEventListener('click', openInfo);
        document.getElementById('fourHuroofLink').addEventListener('click', (e) => { e.preventDefault(); openFourHuroof(); });
        document.getElementById('notesLink').addEventListener('click', (e) => { e.preventDefault(); openNotes(); });

        document.querySelectorAll('.close-modal').forEach(btn => {
            btn.addEventListener('click', closeModal);
        });
        
        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                closeModal();
            }
        });
        
        // Initialize on load
        window.onload = initLetterSelectors;
    </script>
</body>
</html>
